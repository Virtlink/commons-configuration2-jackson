language: java
jdk:
- openjdk8
- oraclejdk8
- openjdk11
- oraclejdk11
- openjdk14
- oraclejdk14

script:
- ./gradlew build

deploy:
- provider: releases
  api_key: ${GITHUB_API_KEY}
  file_glob: true
  file:
    - ./build/libs/commons-configuration2-jackson-*.jar
  skip_cleanup: true
  on:
    repo: Virtlink/commons-configuration2-jackson
    branch: master
    tags: true
    jdk: openjdk8
- provider: script
  script: ./gradlew bintrayUpload
  skip_cleanup: true
  on:
    repo: Virtlink/commons-configuration2-jackson
    branch: master
    tags: true
    jdk: openjdk8
